МІНІСТЕРСТВО ОСВІТИ І НАУКИ УКРАЇНИ ХАРКІВСЬКИЙ НАЦІОНАЛЬНИЙ УНІВЕРСИТЕТ РАДІОЕЛЕКТРОНІКИ




Кафедра програмної інженерії




Звіт
з лабораторної роботи №2
з дисципліни «Скриптові мови програмування»






Виконала: 
ст. гр. ПЗПІ-23-2 
Краснокутська Ю. Є. 
Перевірив: 
ст. викл. каф. ПІ 
Сокорчук І. П. 








Харків – 2025
2 
Принципи роботи РНР. Основні синтаксичні конструкції РНР. Дані, їхні типи та робота з ними
     2.1 Мета роботи: 
     Ознайомитися з основами синтаксису та принципами роботи мови РНР. Отримати практичні навички написання програм скриптовими мовами. Розробити консольний застосунок «Продовольчий магазин "Весна"». 
     2.2 Хід роботи
     Створити консольний застосунок «Продовольчий магазин "Весна"». 
     2.2.1 Вимоги до скрипта: 
     Програма після запуску повинна вивести на термінал перелік можливих дій:
################################
# ПРОДОВОЛЬЧИЙ МАГАЗИН "ВЕСНА" #
################################
1 Вибрати товари
2 Отримати підсумковий рахунок
3 Налаштувати свій профіль
0 Вийти з програми
Введіть команду: _В
     Далі програма очікує введення значення з клавіатури. Якщо користувач вводить число, якого немає в списку можливих команд, необхідно вивести повідомлення про помилку і запропонувати користувачу ввести інше число:
Введіть команду: 4
ПОМИЛКА! Введіть правильну команду
1 Вибрати товари
2 Отримати підсумковий рахунок
3 Налаштувати свій профіль
0 Вийти з програми
Введіть команду: _В
     Щоб розпочати купувати товари, необхідно ввести число «1», після чого користувач повинен потрапити в режим закупівлі товарів. На екрані має з’явитися перелік продуктів, де кожен рядок складається з номера, назви товару і його вартості, наприклад:
Введіть команду: 1
№  НАЗВА                 ЦІНА
1  Молоко пастеризоване  12
2  Хліб чорний           9
3  Сир білий             21
4  Сметана 20%           25
5  Кефір 1%              19
6  Вода газована         18
7  Печиво "Весна"        14
   -----------
0  ПОВЕРНУТИСЯ
Виберіть товар: _В
     Щоб купити товар, необхідно ввести його номер. Після успішної перевірки на існування номера товару в списку, програма має попросити ввести кількість товару:
Виберіть товар: 2
Вибрано: Хліб чорний
Введіть кількість, штук: 1
У КОШИКУ:
НАЗВА        КІЛЬКІСТЬ
Хліб чорний  1
     Якщо номер товару і його кількість (менше 100 шт.) були вказані коректно, то товар додається в кошик. Якщо вказано кількість «0», то товар видаляється з кошика: 
Виберіть товар: 2
Вибрано: Хліб чорний
Введіть кількість, штук: 0
ВИДАЛЯЮ З КОШИКА
КОШИК ПОРОЖНІЙ
     Далі знову відображається перелік товарів і пропонується купити наступний товар. Якщо номер товару вказано неправильно, виводиться сповіщення про помилку, нову виводиться перелік товарів:
№  НАЗВА                 ЦІНА
1  Молоко пастеризоване  12
2  Хліб чорний           9
3  Сир білий             21
4  Сметана 20%           25
5  Кефір 1%              19
6  Вода газована         18
7  Печиво "Весна"        14
   -----------
0  ПОВЕРНУТИСЯ
Виберіть товар: 8
ПОМИЛКА! ВКАЗАНО НЕПРАВИЛЬНИЙ НОМЕР ТОВАРУ
     Щоб завершити купувати товари і перейти до попереднього меню, необхідно ввести з клавіатури цифру «0». Щоб отримати підсумковий рахунок, потрібно ввести число «2». Рахунок має містити таку інформацію: №, назва, ціна товару, кількість товару, вартість товару. У кінці чека має бути: РАЗОМ ДО CПЛАТИ: сума_за_всі_товари. Наприклад:
Введіть команду: 2
№  НАЗВА                 ЦІНА  КІЛЬКІСТЬ  ВАРТІСТЬ
1  Печиво "Весна"        14    1          14
2  Молоко пастеризоване  12    2          24
3  Сметана 20%           25    1          25
4  Хліб чорний           9     1          9
РАЗОМ ДО CПЛАТИ: 72
     Щоб встановити свій профіль потрібно, ввести число «3», після чого програма попросить ввести ваше ім'я та ваш вік: 
Ваше імʼя: _
Ваш вік: _
     Імʼя користувача не може бути порожнім і повинно містити хоча б одну літеру.
Користувач не може бути молодшим 7-ми або старшим 150-ти років
Щоб завершити роботу та вийти з програми, потрібно ввести число «0».
У програмі потрібно перевіряти інформацію, яку вводить користувач, а саме:
* обраний пункт меню існує;
* обраний товар існує;
* введена кількість товару більша нуля;
* імʼя користувача містить хоча б одну літеру;
* вік користувача становить від 7-ми до 150-ти років.
     2.2.2 Створення скрипта відповідно до вимог
     Масив з продуктами зберігається в окремому файлу «products.php», який містить список товарів з їх назвою та ціною. Вміст файлу «products.php» розміщено у додатку Б. 
     На початку файлу розміщено шебанг [додаток А, рядок 1] та теги, які відкривають [додаток А, рядок 2] та закривають PHP-блок [додаток А, рядок 187]. Код програми розташовується між відкриваючим та закриваючим тегами.
     Підключення файлу «products.php» відбувається за допомогою «require_once» [додаток А, рядок 4].
     Створено змінні, які зберігатимуть ім’я та вік користувача та дані товарів, які зберігатимуться в кошику [додаток А, рядки 6-7].
     Розроблено функцію «print_menu», яка виводить головне меню програми в консоль [додаток А, рядки 9-18]. Доступні опції: 
* вибір товарів;
* перегляд товарів в кошику та підсумкового рахунку;
* налаштування профілю;
* вихід.
     Розроблено функцію «read_input($prompt)», яка зчитує ввід користувача з консолі, виводячи текст-підказку, та повертає оброблений ввід користувача [додаток А, рядки 20-22].
     Розроблено функцію «paddings($row, $widths)», яка форматує та вирівнює рядок у вигляді таблиці. Кожен рядок виводиться з вирівнюванням праворуч по ширині, визначеній для кожної колонки окремо [додаток А, рядки 24-29]. 
     Розроблено основну функцію «shopping(&$cart, $products)», яка: виводить таблицю з товарами; дозволяє обрати товар за ID та ввести кількість у межах від 0 до 99; після виводить вміст кошика. Враховано перевірку на існування обраного пункту меню та товару, кількості товару [додаток А, рядки 31-91].
     Розроблено функцію «show_bill($cart, $products)», яка генерує кінцевий рахунок та виводить у консоль [додаток А, рядки 93-131].
     Розроблено функцію «setup_profile(&$profile)», яка дозволяє користувачу налаштувати профіль та зберігає його дані. Враховано перевірку на кількість букв в імені користувача та його вік [додаток А, рядки 133-151].
     Розроблено функцію «main», в якій містяться виклики усіх розроблених функцій [додаток А, рядки 153-184]. Функція постійно виводить головне меню, з читує команду користувача та виконує відповідну дію. Враховано перевірку на коректність команд. 
     2.3 Висновки
     На даній лабораторній роботі я отримала практичні навички з написання програм мовою PHP та розробила консольний застосунок «Продовольчий магазин "Весна"».

     ДОДАТОК А
     Повний текст написаного PHP-скрипта
 1 #!usr/bin/php
 2 <?php
 3 
 4 require_once 'products.php';
 5 
 6 $cart = [];
 7 $user = ['name' => '', 'age' => 0];
 8 
 9 function print_menu(){
10     echo "################################\n";
11     echo "# ПРОДОВОЛЬЧИЙ МАГАЗИН \"ВЕСНА\" #\n";
12     echo "################################\n";
13     echo "1 Вибрати товари\n";
14     echo "2 Отримати підсумковий рахунок\n";
15     echo "3 Налаштувати свій профіль\n";
16     echo "0 Вийти з програми\n";
17     echo "Введіть команду: ";
18 }
19 
20 function read_input($prompt = ''){
21     return trim(readline($prompt));
22 } 
23 
24 function paddings($row, $widths) {
25     foreach ($row as $i => $cell) {
26         echo mb_str_pad($cell, $widths[$i], ' ', STR_PAD_RIGHT) . "  ";
27     }
28     echo "\n";
29 }
30 
31 function shopping(&$cart, $products){
32     while (true){
33         $num_len = mb_strlen("№");
34         $name_len = mb_strlen("НАЗВА");
35         $price_len = mb_strlen("ЦІНА");
36         foreach ($products as $id => $item){
37             $num_len = max(mb_strlen("$id"), $num_len);
38             $name_len = max(mb_strlen($item['name']), $name_len);
39             $price_len = max(mb_strlen($item['price']), $price_len);
40         }
41 
42         paddings(["№", "НАЗВА", "ЦІНА"], [$num_len, $name_len, $price_len]);
43 
44         foreach ($products as $id => $item){
45             paddings([$id, $item['name'], $item['price']], [$num_len, $name_len, $price_len]);
46         }
47 
48         echo "   -----------\n";
49         echo "0  ПОВЕРНУТИСЯ\n";
50 
51         $input = read_input("Виберіть товар: ");
52 
53         if ($input === "0") return;
54 
55         if (!array_key_exists((int)$input, $products)) {
56             echo "ПОМИЛКА! ВКАЗАНО НЕПРАВИЛЬНИЙ НОМЕР ТОВАРУ\n\n";
57             continue;
58         }
59 
60         $id = (int)$input;
61         $product = $products[$id];
62 
63         echo "Вибрано: {$product['name']}\n";
64 
65         $quantity = (int)read_input("Введіть кількість, штук: ");
66 
67         if ($quantity < 0 || $quantity >= 100){
68             echo "ПОМИЛКА! Кількість повинна бути від 0 до 99\n\n";
69             continue;
70         }
71 
72         if ($quantity === 0){
73             if (isset($cart[$id])) {
74                 unset($cart[$id]);
75                 echo "ВИДАЛЯЮ З КОШИКА\n";
76             }
77         } else {
78             $cart[$id] = $quantity;
79         }
80 
81         if (empty($cart)){
82             echo "КОШИК ПОРОЖНІЙ\n\n";
83         } else {
84             echo "У КОШИКУ:\nНАЗВА        КІЛЬКІСТЬ\n";
85             foreach ($cart as $pid => $quantity) {
86                 echo "{$products[$pid]['name']}  $quantity\n";
87             }
88             echo "\n";
89         }
90     }
91 }
92 
93 function show_bill($cart, $products){
94     if (empty($cart)) {
95         echo "КОШИК ПОРОЖНІЙ. ДОДАЙТЕ ТОВАРИ.\n";
96         return;
97     }
98 
99     $num_len = mb_strlen("№");
100     $name_len = mb_strlen("НАЗВА");
101     $price_len = mb_strlen("ЦІНА");
102     $quantity_len = mb_strlen("КІЛЬКІСТЬ");
103     $cost_len = mb_strlen("ВАРТІСТЬ");
104 
105     foreach ($cart as $id => $quantity){
106         $product = $products[$id];
107         $price = $product['price'];
108         $cost = $price * $quantity;
109 
110         $num_len = max(mb_strlen("$id"), $num_len);
111         $name_len = max(mb_strlen($product['name']), $name_len);
112         $price_len = max(mb_strlen("$price"), $price_len);
113         $quantity_len = max(mb_strlen("$quantity"), $quantity_len);
114         $cost_len = max(mb_strlen("$cost"), $cost_len);
115     }
116 
117     paddings(["№", "НАЗВА", "ЦІНА", "КІЛЬКІСТЬ", "ВАРТІСТЬ"], [$num_len, $name_len, $price_len, $quantity_len, $cost_len]);
118 
119     $total_cost = 0;
120     foreach ($cart as $id => $quantity){
121         $product = $products[$id];
122         $price = $product['price'];
123         $cost = $price * $quantity;
124         $total_cost += $cost;
125         
126         paddings([$id, $product['name'], $price, $quantity, $cost], [$num_len, $name_len, $price_len, $quantity_len, $cost_len]);
127     }
128 
129     echo str_repeat("-", $num_len + $name_len + $price_len + $quantity_len + $cost_len + 10) . "\n";
130     echo "РАЗОМ ДО СПЛАТИ: $total_cost грн\n";
131 }
132 
133 function setup_profile(&$profile){
134     while(true){
135         $name = read_input("Ваше ім'я: ");
136         if (!preg_match('/[a-zA-Zа-яА-ЯіІїЇєЄґҐ]/u', $name)) {
137             echo "Імʼя повинно містити хоча б одну літеру\n";
138             continue;
139         }
140 
141         $age = read_input("Ваш вік: ");
142         if (!is_numeric($age) || (int)$age < 7 || (int)$age > 150) {
143             echo "Вік користувача повинен бути від 7 до 150 років.\n";
144             continue;
145         }
146 
147         $profile['name'] = $name;
148         $profile['age'] = (int)$age; 
149         break;
150     }
151 }
152 
153 function main() {
154     global $cart, $products, $user;
155 
156     while (true) {
157         print_menu();
158         $command = read_input();
159 
160         if (!in_array($command, ["0", "1", "2", "3"])) {
161             echo "ПОМИЛКА! Введіть правильну команду\n\n";
162             continue;
163         }
164 
165         switch ($command) {
166             case "1":
167                 shopping($cart, $products);
168                 break;
169             case "2":
170                 show_bill($cart, $products);
171                 break;
172             case "3":
173                 setup_profile($profile);
174                 break;
175             case "0":
176                 echo "Дякуємо за покупки! До побачення.\n";
177                 exit;
178             default:
179                 echo "ПОМИЛКА! Введіть правильну команду\n";
180                 break;
181         }
182         echo "\n";
183     }
184 } 
185 
186 main()
187 ?>
     2
     
     

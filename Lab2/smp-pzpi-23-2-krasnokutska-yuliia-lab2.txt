                 МІНІСТЕРСТВО ОСВІТИ І НАУКИ УКРАЇНИ
   ХАРКІВСЬКИЙ НАЦІОНАЛЬНИЙ УНІВЕРСИТЕТ РАДІОЕЛЕКТРОНІКИ



                         Кафедра Програмної інженерії




                                     Звіт
                           з лабораторної роботи №2
                з дисципліни: «Скриптові мови програмування»
з теми: «Принципи роботи РНР. Основні синтаксичні конструкції РНР. Дані, їхні
                            типи та робота з ними»




Виконав:                                                           Перевірив:
ст. гр. ПЗПІ-ПЗПІ-23-2                           Старший викладач кафедри ПІ
Краснокутська Ю. Є.                                             Сокорчук І. П.




                                Харків – 2025
                                                                            2
 2 ПРИНЦИПИ РОБОТИ РНР. ОСНОВНІ СИНТАКСИЧНІ КОНСТРУКЦІЇ
                 РНР. ДАНІ, ЇХНІ ТИПИ ТА РОБОТА З НИМИ
     2.1 Історія змін

№ Дата                Версія звіту   Опис змін та виправлень
1 26.05.2025          0.1            Створено звіт

     2.2 Мета роботи

     Ознайомитися з основами синтаксису та принципами роботи мови РНР.
Отримати практичні навички написання програм скриптовими мовами. Розробити
консольний застосунок «Продовольчий магазин «Весна»».

     2.3 Хід роботи

     Створити консольний застосунок «Продовольчий магазин «Весна»».

     2.3.1 Вимоги до скрипта:

     Програма після запуску повинна вивести на термінал перелік можливих дій:

     ################################
     # ПРОДОВОЛЬЧИЙ МАГАЗИН "ВЕСНА" #
     ################################
     1 Вибрати товари
     2 Отримати підсумковий рахунок
     3 Налаштувати свій профіль
     0 Вийти з програми
     Введіть команду: _


     Далі програма очікує введення значення з клавіатури. Якщо користувач
вводить число, якого немає в списку можливих команд, необхідно вивести
повідомлення про помилку і запропонувати користувачу ввести інше число:

     Введіть команду: 4
     ПОМИЛКА! Введіть правильну команду
     1 Вибрати товари
     2 Отримати підсумковий рахунок
     3 Налаштувати свій профіль
     0 Вийти з програми
     Введіть команду: _
                                                                                 3
     Щоб розпочати купувати товари, необхідно ввести число «1», після чого
користувач повинен потрапити в режим закупівлі товарів. На екрані має з’явитися
перелік продуктів, де кожен рядок складається з номера, назви товару і його
вартості, наприклад:

     Введіть команду: 1
     № НАЗВА                     ЦІНА
     1 Молоко пастеризоване      12
     2 Хліб чорний               9
     3 Сир білий                 21
     4 Сметана 20%               25
     5 Кефір 1%                  19
     6 Вода газована             18
     7 Печиво "Весна"            14
        -----------
     0 ПОВЕРНУТИСЯ
     Виберіть товар: _


     Щоб купити товар, необхідно ввести його номер. Після успішної перевірки на
існування номера товару в списку, програма має попросити ввести кількість товару:

     Виберіть товар: 2
     Вибрано: Хліб чорний
     Введіть кількість, штук: 1
     У КОШИКУ:
     НАЗВА        КІЛЬКІСТЬ
     Хліб чорний 1


     Якщо номер товару і його кількість (менше 100 шт.) були вказані коректно, то
товар додається в кошик. Якщо вказано кількість «0», то товар видаляється з кошика:

     Виберіть товар: 2
     Вибрано: Хліб чорний
     Введіть кількість, штук: 0
     ВИДАЛЯЮ З КОШИКА
     КОШИК ПОРОЖНІЙ


     Далі знову відображається перелік товарів і пропонується купити наступний
товар. Якщо номер товару вказано неправильно, виводиться сповіщення про
помилку, нову виводиться перелік товарів:

     №   НАЗВА                   ЦІНА
     1   Молоко пастеризоване    12
     2   Хліб чорний             9
     3   Сир білий               21
     4   Сметана 20%             25
     5   Кефір 1%                19
                                                                               4
     6  Вода газована         18
     7  Печиво "Весна"        14
        -----------
     0 ПОВЕРНУТИСЯ
     Виберіть товар: 8
     ПОМИЛКА! ВКАЗАНО НЕПРАВИЛЬНИЙ НОМЕР ТОВАРУ


     Щоб завершити купувати товари і перейти до попереднього меню, необхідно
ввести з клавіатури цифру «0». Щоб отримати підсумковий рахунок, потрібно
ввести число «2». Рахунок має містити таку інформацію: №, назва, ціна товару,
кількість товару, вартість товару. У кінці чека має бути: РАЗОМ ДО CПЛАТИ:
сума_за_всі_товари. Наприклад:

     Введіть команду: 2
     № НАЗВА                     ЦІНА   КІЛЬКІСТЬ   ВАРТІСТЬ
     1 Печиво "Весна"            14     1           14
     2 Молоко пастеризоване      12     2           24
     3 Сметана 20%               25     1           25
     4 Хліб чорний               9      1           9
     РАЗОМ ДО CПЛАТИ: 72


     Щоб встановити свій профіль потрібно, ввести число «3», після чого
програма попросить ввести ваше ім’я та ваш вік:

     Ваше імʼя: _
     Ваш вік: _


     Імʼя користувача не може бути порожнім і повинно містити хоча б одну літеру.
Користувач не може бути молодшим 7-ми або старшим 150-ти років Щоб завершити
роботу та вийти з програми, потрібно ввести число «0». У програмі потрібно
перевіряти інформацію, яку вводить користувач, а саме:
      –   обраний пункт меню існує;
      –   обраний товар існує;
      –   введена кількість товару більша нуля;
      –   імʼя користувача містить хоча б одну літеру;
      –   вік користувача становить від 7-ми до 150-ти років.
                                                                                   5
      2.3.2 Створення скрипта відповідно до вимог

      Масив з продуктами зберігається в окремому файлу «products.php», який
містить список товарів з їх назвою та ціною. Вміст файлу «products.php» розміщено
у додатку Б.
      На початку файлу розміщено шебанг [додаток Б, рядок 1] та теги, які
відкривають [додаток Б, рядок 2] та закривають PHP-блок [додаток Б, рядок 187].
Код програми розташовується між відкриваючим та закриваючим тегами.
      Підключення      файлу     «products.php»    відбувається     за   допомогою
«require_once» [додаток Б, рядок 4].
      Створено змінні, які зберігатимуть ім’я та вік користувача та дані товарів, які
зберігатимуться в кошику [додаток Б, рядки 6-7].
      Розроблено функцію «print_menu», яка виводить головне меню програми в
консоль [додаток Б, рядки 9-18]. Доступні опції:
      –   вибір товарів;
      –   перегляд товарів в кошику та підсумкового рахунку;
      –   налаштування профілю;
      –   вихід.
      Розроблено функцію «read_input($prompt)», яка зчитує ввід користувача з
консолі, виводячи текст-підказку, та повертає оброблений ввід користувача [додаток
Б, рядки 20-22].
      Розроблено функцію «paddings($row, $widths)», яка форматує та вирівнює
рядок у вигляді таблиці. Кожен рядок виводиться з вирівнюванням праворуч по
ширині, визначеній для кожної колонки окремо [додаток Б, рядки 24-29].
      Розроблено основну функцію «shopping(&$cart, $products)», яка: виводить
таблицю з товарами; дозволяє обрати товар за ID та ввести кількість у межах від
0 до 99; після виводить вміст кошика. Враховано перевірку на існування обраного
пункту меню та товару, кількості товару [додаток Б, рядки 31-91].
      Розроблено функцію «show_bill($cart, $products)», яка генерує кінцевий
рахунок та виводить у консоль [додаток Б, рядки 93-131].
                                                                                6
     Розроблено функцію «setup_profile(&$profile)», яка дозволяє користувачу
налаштувати профіль та зберігає його дані. Враховано перевірку на кількість букв в
імені користувача та його вік [додаток Б, рядки 133-151].
     Розроблено функцію «main», в якій містяться виклики усіх розроблених
функцій [додаток Б, рядки 153-184]. Функція постійно виводить головне меню,
з читує команду користувача та виконує відповідну дію. Враховано перевірку на
коректність команд.

     2.4 Висновки

     На даній лабораторній роботі я отримала практичні навички з написання
програм мовою PHP та розробила консольний застосунок «Продовольчий магазин
«Весна»».
                                                                               7
                                ДОДАТОК А
                                 Відеозапис

    Відеозапис презентації результатів лабораторної роботи: https://youtu.be/7-MBTJAoPfM
    Хронологічний опис відеозапису:
    00:00 – Вступ та огляд структури програми
    00:33 – Огляд коду: Основні функції та змінні
    01:53 – Огляд коду: Логіка вибору товарів (функція shopping)
    04:01 – Огляд коду: Функція підсумкового рахунку (функція show_bill)
    04:40 – Огляд коду: Функція налаштування профілю (функція setup_profile)
    05:27 – Огляд коду: Головна функція main()
    06:06 – Демонстрація роботи програми
                                                                                      8
                                   ДОДАТОК Б
                                  Програмний код

       Б.1 Файл products.php

       GitHub репозиторій: https://github.com/NureKrasnokutskaYuliia/smp-pzpi-23-2-krasnokutska-yuliia/tree/main/Lab2/smp-pzpi-23-2-krasnokutska-yuliia-lab2/products.php

 1    #!/usr/bin/php
 2    <?php
 3
 4    $products = [
 5        1 => ['name' => 'Молоко пастеризоване', 'price' => 12],
 6        2 => ['name' => 'Хліб чорний', 'price' => 9],
 7        3 => ['name' => 'Сир білий', 'price' => 21],
 8        4 => ['name' => 'Сметана 20%', 'price' => 25],
 9        5 => ['name' => 'Кефір 1%', 'price' => 19],
10        6 => ['name' => 'Вода газована', 'price' => 18],
11        7 => ['name' => 'Печиво "Весна"', 'price' => 14],
12    ];
13
14    ?>


       Б.2 Файл smp-pzpi-23-2-krasnokutska-yuliia-lab2-code.php

       GitHub репозиторій: https://github.com/NureKrasnokutskaYuliia/smp-pzpi-23-2-krasnokutska-yuliia/tree/main/Lab2/smp-pzpi-23-2-krasnokutska-yuliia-lab2/smp-pzpi-23-2-krasnokutska-yuliia-lab2-code.php

  1    #!/usr/bin/php
  2    <?php
  3
  4    require_once 'products.php';
  5
  6    $cart = [];
  7    $user = ['name' => '', 'age' => 0];
  8
  9    function print_menu(){
 10        echo "################################\n";
 11        echo "# ПРОДОВОЛЬЧИЙ МАГАЗИН \"ВЕСНА\" #\n";
 12        echo "################################\n";
 13        echo "1 Вибрати товари\n";
 14        echo "2 Отримати підсумковий рахунок\n";
 15        echo "3 Налаштувати свій профіль\n";
 16        echo "0 Вийти з програми\n";
 17        echo "Введіть команду: ";
 18    }
                                                                           9

19
20 function read_input($prompt = ''){
21     return trim(readline($prompt));
22 }
23
24 function paddings($row, $widths) {
25     foreach ($row as $i => $cell) {
26         echo mb_str_pad($cell, $widths[$i], ' ', STR_PAD_RIGHT) . "
   ";
27     }
28     echo "\n";
29 }
30
31 function shopping(&$cart, $products){
32     while (true){
33         $num_len = mb_strlen("№");
34         $name_len = mb_strlen("НАЗВА");
35         $price_len = mb_strlen("ЦІНА");
36         foreach ($products as $id => $item){
37             $num_len = max(mb_strlen("$id"), $num_len);
38             $name_len = max(mb_strlen($item['name']), $name_len);
39             $price_len = max(mb_strlen($item['price']), $price_len);
40         }
41
42         paddings(["№", "НАЗВА", "ЦІНА"], [$num_len, $name_len,
   $price_len]);
43
44         foreach ($products as $id => $item){
45             paddings([$id, $item['name'], $item['price']], [$num_len,
   $name_len, $price_len]);
46         }
47
48         echo "    -----------\n";
49         echo "0 ПОВЕРНУТИСЯ\n";
50
51         $input = read_input("Виберіть товар: ");
52
53         if ($input === "0") return;
54
55         if (!array_key_exists((int)$input, $products)) {
56             echo "ПОМИЛКА! ВКАЗАНО НЕПРАВИЛЬНИЙ НОМЕР ТОВАРУ\n\n";
57             continue;
58         }
59
60         $id = (int)$input;
61         $product = $products[$id];
62
63         echo "Вибрано: {$product['name']}\n";
64
65         $quantity = (int)read_input("Введіть кількість, штук: ");
66
67         if ($quantity < 0 || $quantity >= 100){
68             echo "ПОМИЛКА! Кількість повинна бути від 0 до 99\n\n";
69             continue;
70         }
71
                                                                         10

 72         if ($quantity === 0){
 73             if (isset($cart[$id])) {
 74                  unset($cart[$id]);
 75                  echo "ВИДАЛЯЮ З КОШИКА\n";
 76             }
 77         } else {
 78             $cart[$id] = $quantity;
 79         }
 80
 81         if (empty($cart)){
 82             echo "КОШИК ПОРОЖНІЙ\n\n";
 83         } else {
 84             echo "У КОШИКУ:\n";
 85
 86             $quantity_len = mb_strlen("КІЛЬКІСТЬ");
 87             foreach ($cart as $pid => $quantity) {
 88                  $name_len = max(mb_strlen($item['name']), $name_len);
 89                  $quantity_len = max($quantity_len,
    mb_strlen((string)$quantity));
 90             }
 91
 92             paddings(["НАЗВА", "КІЛЬКІСТЬ"], [$name_len,
    $quantity_len]);
 93
 94             foreach ($cart as $pid => $quantity) {
 95                  paddings([$products[$pid]['name'], $quantity],
    [$name_len, $quantity_len]);
 96             }
 97
 98             echo "\n";
 99         }
100     }
101 }
102
103 function show_bill($cart, $products){
104     if (empty($cart)) {
105         echo "КОШИК ПОРОЖНІЙ. ДОДАЙТЕ ТОВАРИ.\n";
106         return;
107     }
108
109     $num_len = mb_strlen("№");
110     $name_len = mb_strlen("НАЗВА");
111     $price_len = mb_strlen("ЦІНА");
112     $quantity_len = mb_strlen("КІЛЬКІСТЬ");
113     $cost_len = mb_strlen("ВАРТІСТЬ");
114
115     foreach ($cart as $id => $quantity){
116         $product = $products[$id];
117         $price = $product['price'];
118         $cost = $price * $quantity;
119
120         $num_len = max(mb_strlen("$id"), $num_len);
121         $name_len = max(mb_strlen($product['name']), $name_len);
122         $price_len = max(mb_strlen("$price"), $price_len);
123         $quantity_len = max(mb_strlen("$quantity"), $quantity_len);
124         $cost_len = max(mb_strlen("$cost"), $cost_len);
                                                                        11

125       }
126
127       paddings(["№", "НАЗВА", "ЦІНА", "КІЛЬКІСТЬ", "ВАРТІСТЬ"],
      [$num_len, $name_len, $price_len, $quantity_len, $cost_len]);
128
129       $total_cost = 0;
130       foreach ($cart as $id => $quantity){
131           $product = $products[$id];
132           $price = $product['price'];
133           $cost = $price * $quantity;
134           $total_cost += $cost;
135
136         paddings([$id, $product['name'], $price, $quantity, $cost],
    [$num_len, $name_len, $price_len, $quantity_len, $cost_len]);
137     }
138
139     echo str_repeat("-", $num_len + $name_len + $price_len +
    $quantity_len + $cost_len + 10) . "\n";
140     echo "РАЗОМ ДО СПЛАТИ: $total_cost грн\n";
141 }
142
143 function setup_profile(&$profile){
144     while(true){
145         $name = read_input("Ваше ім'я: ");
146         if (!preg_match('/[a-zA-Zа-яА-ЯіІїЇєЄґҐ]/u', $name)) {
147             echo "Імʼя повинно містити хоча б одну літеру\n";
148             continue;
149         }
150
151         $age = read_input("Ваш вік: ");
152         if (!is_numeric($age) || (int)$age < 7 || (int)$age > 150) {
153             echo "Вік користувача повинен бути від 7 до 150 років.\n";
154             continue;
155         }
156
157         $profile['name'] = $name;
158         $profile['age'] = (int)$age;
159         break;
160     }
161 }
162
163 function main() {
164     global $cart, $products, $user;
165
166     while (true) {
167         print_menu();
168         $command = read_input();
169
170         if (!in_array($command, ["0", "1", "2", "3"])) {
171             echo "ПОМИЛКА! Введіть правильну команду\n\n";
172             continue;
173         }
174
175         switch ($command) {
176             case "1":
177                  shopping($cart, $products);
                                                                    12

178                  break;
179              case "2":
180                  show_bill($cart, $products);
181                  break;
182              case "3":
183                  setup_profile($profile);
184                  break;
185              case "0":
186                  echo "Дякуємо за покупки! До побачення.\n";
187                  exit;
188              default:
189                  echo "ПОМИЛКА! Введіть правильну команду\n";
190                  break;
191          }
192          echo "\n";
193     }
194 }
195
196 main()
197 ?>

